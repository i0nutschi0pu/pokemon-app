{"ast":null,"code":"import _asyncToGenerator from \"/Users/ionut/pokemon_app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpHeaders } from '@angular/common/http';\nimport { of } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./message.service\";\nimport * as i3 from \"@angular/router\";\nexport class PokemonCRUDService {\n  constructor(http, messageService, route) {\n    this.http = http;\n    this.messageService = messageService;\n    this.route = route;\n    this.pokemonsUrl = 'http://pokeapi.co/api/v2/pokemon/?limit=30&offset=0.';\n    this.pokemonByNameUrl = 'https://pokeapi.co/api/v2/pokemon';\n    this.list = [];\n    this.pokemoTypes = [];\n    this.bb = [];\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      })\n    };\n  } // getPokemons(): Observable<PokemonsPayload>  {\n  //   return this.http.get<PokemonsPayload>(this.pokemonsUrl);\n  // }\n\n\n  getPokemons2() {\n    return this.http.get(this.pokemonsUrl);\n  }\n\n  getSearchedPokemon(term) {\n    if (!term.trim()) {\n      // if not search term, return empty pokemon array.\n      return;\n    }\n\n    this.http.get(`${this.pokemonByNameUrl}/${term}`).subscribe(response => {\n      // console.log(response);\n      for (const [k, v] of Object.entries(response)) {\n        if (v.name === term) {\n          // window.location.href = `${this.pokemonByNameUrl}/${term}`;\n          console.log('daaa');\n        }\n      }\n    }, catchError(this.handleError('getSearchedPokemon', [])));\n  }\n\n  getPokemonTypes() {\n    var PokemonTypesUrl = 'https://pokeapi.co/api/v2/type';\n    return this.http.get(PokemonTypesUrl);\n  }\n\n  processPokem() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let result = [];\n      let user_list = [];\n\n      for (const [key, value] of Object.entries(_this.getPokemonTypes())) {\n        result = yield _this.getPokemonTypes();\n        user_list.push(result);\n      }\n\n      return user_list;\n    })();\n  }\n\n  getPokemonImage() {\n    // let list: string[] = [];\n    //let list: {id: number, name: string; url: string}[] = [];\n    var data = this.getPokemons2();\n    let i = 0;\n    var res = []; // console.log(this.getPokemons2());\n    //   this.getPokemons2.subscribe(\n    //     data => {\n    //         this.results = data.Results\n    //     }\n    // );\n\n    this.getPokemons2().forEach(item => {\n      //console.log(item.results[0].name);\n      //res.push(item.results);\n      item.results.forEach(childrenEntry => {\n        this.list.push({\n          id: Number(childrenEntry.url.split('/')[childrenEntry.url.split('/').length - 2]),\n          name: childrenEntry.name,\n          url: childrenEntry.url\n        });\n      });\n    }); // res.forEach(item2 => {\n    //   //console.log(item.results[0].name);\n    //   list.push(item2.name);\n    // });\n    //  console.log(res);\n\n    console.log(this.list); //  var dataModels = [];\n    //  dataModels[0] = {\n    //      childNodes: []\n    //  };\n    //  dataModels[0].childNodes[0] = {\n    //      appId: \"foo\"\n    //  };\n    //  dataModels.forEach(function(entry){ \n    //      entry.childNodes.forEach(function(childrenEntry) { // was missing a )\n    //        console.log(childrenEntry.appId);\n    //      });\n    //  });\n\n    return this.list;\n  } // /** GET hero by id. Will 404 if id not found */\n\n\n  getPokemon(id) {\n    const url = `${this.pokemonByNameUrl}/${id}`;\n    console.log(url);\n    return this.http.get(url).pipe(tap(_ => this.log(`fetched Pokemon id=${id}`)), catchError(this.handleError(`getPokemon id=${id}`)));\n  }\n\n  getPokemonIdByName(name) {\n    if (!name.trim()) {\n      // if not search term, return empty pokemon array.\n      return null;\n    }\n\n    this.http.get(`${this.pokemonByNameUrl}/${name}`).subscribe(response => {\n      // console.log(response);\n      for (const [k, v] of Object.entries(response)) {\n        if (v.name === name) {\n          // window.location.href = `${this.pokemonByNameUrl}/${term}`;\n          console.log('daaa');\n          return v.id;\n        }\n      }\n    }, catchError(this.handleError('getPokemonIdByName', [])));\n    return;\n  } // /* GET heroes whose name contains search term */\n  // searchPokemons2(term: string): any {\n  //   console.log('asaaa');\n  //   if (!term.trim()) {\n  //     // if not search term, return empty pokemon array.\n  //     return of([]);\n  //   }\n  //    console.log(`${this.pokemonByNameUrl}/${term}`);\n  //    this.http.get<Pokemon[]>(`${this.pokemonByNameUrl}/${term}`).pipe(\n  //     tap(\n  //       (x) => {\n  //         console.log('aaaaaa');\n  //         for (const [k, v] of Object.entries(x)) {\n  //           if(v.name === term){\n  //             console.log('daaaa');\n  //           // window.location.href = 'https://pokeapi.co/api/v2/pokemon/' + term;\n  //           }else{\n  //             console.log('nuu');\n  //           }\n  //           // console.log(x['name'] === term);\n  //         }\n  //         // if(x){\n  //         //   window.location.href = 'https://pokeapi.co/api/v2/pokemon/bulbasaur';\n  //         // }else{\n  //         //   console.log('nuuuuu');\n  //         // }\n  //       }\n  //       // x.length ?\n  //       // this.log(`found pokemons matching \"${term}\"`) :\n  //       // this.log(`no pokemons matching \"${term}\"`)),\n  //     // catchError(this.handleError<Pokemon[]>('searchPokemons', []))\n  //   ));\n  //  // return 'daa';\n  // }\n\n  /* GET heroes whose name contains search term */\n\n\n  searchPokemons(term) {\n    // let results = this.http.get<Pokemon>(`https://pokeapi.co/api/v2/pokemon/bulbasaur`);\n    // results.forEach(item2 => {\n    //   console.log(item2);\n    //   // res.push(item.results);\n    //   // item.results.forEach(childrenEntry => { // was missing a )\n    //   //          list.push({name: childrenEntry.name, url: childrenEntry.url});\n    //   // });\n    // });\n    //  console.log(term);\n    console.log('asaaa');\n\n    if (!term.trim()) {\n      // if not search term, return empty pokemon array.\n      return of([]);\n    } //0727 227 634\n\n\n    console.log(`${this.pokemonByNameUrl}/${term}`);\n    return this.http.get(`${this.pokemonByNameUrl}/${term}`).pipe(tap(x => {\n      console.log('aaaaaa');\n\n      for (const [k, v] of Object.entries(x)) {\n        if (v.name === term) {\n          console.log('daaaa'); // window.location.href = 'https://pokeapi.co/api/v2/pokemon/' + term;\n        } else {\n          console.log('nuu');\n        } // console.log(x['name'] === term);\n\n      } // if(x){\n      //   window.location.href = 'https://pokeapi.co/api/v2/pokemon/bulbasaur';\n      // }else{\n      //   console.log('nuuuuu');\n      // }\n\n    } // x.length ?\n    // this.log(`found pokemons matching \"${term}\"`) :\n    // this.log(`no pokemons matching \"${term}\"`)),\n    // catchError(this.handleError<Pokemon[]>('searchPokemons', []))\n    ));\n  }\n\n  basicSearch(term) {\n    let results = this.http.get(`${this.pokemonByNameUrl}/?name=${term}`); // console.log(results);\n\n    return results;\n  } // getPokemonColour(): { type: string; color: string}[] \n\n\n  getPokemonColour2(type) {\n    let colors = ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', 'lime', 'maroon', 'navy', 'olive', 'orange', 'purple', 'red', 'silver', 'teal', 'white', 'yellow', 'brown', 'magenta', 'kaki'];\n\n    if (type === '') {\n      return 'white';\n    }\n\n    let aa = 'default'; //   let userTestStatus = [\n    //     { \"id\": 0, \"name\": \"Available\" },\n    //     { \"id\": 1, \"name\": \"Ready\" },\n    //     { \"id\": 2, \"name\": \"Started\" }\n    //   ];\n    //   let aa = '';\n    //   userTestStatus.forEach(item => {\n    //     for (const [key, value] of Object.entries(item)) { \n    //     //  console.log(value);\n    //       if(value === 'Ready'){\n    //         aa = 'red';\n    //         break;\n    //       }\n    //     }\n    // });\n    // return aa;\n\n    let pokemoTypes = [];\n    const commonPals = [];\n    const id = parseInt(this.route.snapshot.paramMap.get('id'), 10);\n    let pokemonTypes = this.getPokemonTypes();\n\n    for (const [key, value] of Object.entries(pokemonTypes)) {\n      console.log(value);\n    } // pokemonTypes.forEach(item => {\n    //     for (const [key, value] of Object.entries(item.results)) { \n    //       console.log(value);\n    //       commonPals.push(value.name);\n    //         if(value.name === type){\n    //           aa = 'red';\n    //           break;\n    //      //    console.log('vvvv');\n    //        //  commonPals.push( 'green');\n    //        //  console.log(Number(key));\n    //       //   console.log(colors[Number(key)]);\n    //             // return colors[id];\n    //             // return 5;\n    //         }\n    //     }\n    // });\n\n\n    console.log(commonPals);\n    return aa; // console.log(aa);\n    //   return colors[id];\n    //  console.log(commonPals.length);\n    // console.log(commonPals.length);\n    // //console.log();\n    // console.log(Array.isArray(commonPals));\n    // if(commonPals){\n    //   return commonPals;\n    // }\n    //  console.log(commonPals);\n    //  return this.bb ;\n  }\n\n  getPokemonColour(type) {\n    var colors = ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', 'lime', 'maroon', 'navy', 'olive', 'orange', 'purple', 'red', 'silver', 'teal', 'white', 'yellow', 'brown', 'magenta', 'kaki']; // let pokemoTypes = new Map([]);\n    // if(type === ''){\n    //   return '';\n    // }\n\n    let aa = '';\n    let pokemoTypes = [];\n    this.getPokemonTypes().forEach(item => {\n      for (const [key, value] of Object.entries(item.results)) {\n        console.log(type); //this.pokemoTypes.set(value.name, colors[Number(key)]);\n\n        if (value.name === type) {\n          console.log('vvvv'); //   console.log(colors[Number(key)]);\n          //return colors[Number(key)];\n        } // pokemoTypes.push(\n        //     {\n        //       type: value.name,\n        //       color: colors[Number(key)]\n        //     }\n        // );\n\n      }\n    }); //    console.log(this.bb);\n    // console.log(this.pokemoTypes.keys);\n    //  console.log('xxx');\n    // pokemoTypes.forEach(item => {\n    //   console.log(item.color[0]);\n    // });\n    // this.getPokemonTypes().forEach(item => {\n    //   //console.log(item.results[0].name);\n    //   //res.push(item.results);\n    //   item.results.forEach(item => { // was missing a )\n    //             //console.log(item);\n    //             this.pokemoTypes.push(\n    //                 {\n    //                   type: item.name,\n    //                   color: colors[Number(1)]\n    //                 }\n    //             );\n    //   });\n    // });\n    // return this.pokemoTypes;\n  } // this.http.get<Pokemon>('http://pokeapi.co/api/v2/pokemon/?limit=30&offset=0.').subscribe(data => {\n  //     this.pokemons = data.results;\n  // })\n\n  /**\n   * Handle Http operation that failed.\n   * Let the app continue.\n   *\n   * @param operation - name of the operation that failed\n   * @param result - optional value to return as the observable result\n   */\n\n\n  handleError(operation = 'operation', result) {\n    return error => {\n      // TODO: send the error to remote logging infrastructure\n      console.error(error); // log to console instead\n      // TODO: better job of transforming error for user consumption\n\n      this.log(`${operation} failed: ${error.message}`); // Let the app keep running by returning an empty result.\n\n      return of(result);\n    };\n  }\n  /** Log a HeroService message with the MessageService */\n\n\n  log(message) {\n    this.messageService.add(`HeroService: ${message}`);\n  }\n\n}\n\nPokemonCRUDService.ɵfac = function PokemonCRUDService_Factory(t) {\n  return new (t || PokemonCRUDService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.MessageService), i0.ɵɵinject(i3.ActivatedRoute));\n};\n\nPokemonCRUDService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: PokemonCRUDService,\n  factory: PokemonCRUDService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["HttpHeaders","of","catchError","tap","PokemonCRUDService","constructor","http","messageService","route","headers","getPokemons2","get","pokemonsUrl","getSearchedPokemon","term","trim","pokemonByNameUrl","subscribe","response","k","v","Object","entries","name","console","log","handleError","getPokemonTypes","PokemonTypesUrl","processPokem","result","user_list","key","value","push","getPokemonImage","data","i","res","forEach","item","results","childrenEntry","list","id","Number","url","split","length","getPokemon","pipe","_","getPokemonIdByName","searchPokemons","x","basicSearch","getPokemonColour2","type","colors","aa","pokemoTypes","commonPals","parseInt","snapshot","paramMap","pokemonTypes","getPokemonColour","operation","error","message","add","i0","factory","providedIn"],"sourceRoot":"","sources":["/Users/ionut/pokemon_app/src/app/pokemon-crud.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { Observable, of } from 'rxjs';\nimport { Pokemon } from './pokemon.model';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { MessageService } from './message.service';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class PokemonCRUDService {\n\n  private pokemonsUrl = 'http://pokeapi.co/api/v2/pokemon/?limit=30&offset=0.';\n  private pokemonByNameUrl = 'https://pokeapi.co/api/v2/pokemon'\n  private pokemonImg: any;\n  private results: any;\n  private res: any;\n  public list: {id: number, name: string; url: string}[] = [];\n  private pokemoTypes: { type: string; color: string}[] = [];\n  public bb: [] = [];\n\n\n  httpOptions = {\n    headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n  };\n\n\n  constructor(private http: HttpClient, private messageService: MessageService, private route: ActivatedRoute) {}\n\n      // getPokemons(): Observable<PokemonsPayload>  {\n      //   return this.http.get<PokemonsPayload>(this.pokemonsUrl);\n      // }\n\n      getPokemons2(): Observable<Pokemon>  {\n        return this.http.get<Pokemon>(this.pokemonsUrl);\n      }\n\n      getSearchedPokemon(term: string): void \n      {\n          if (!term.trim()) {\n            // if not search term, return empty pokemon array.\n            return ;\n          }\n\n          this.http.get<Pokemon>(`${this.pokemonByNameUrl}/${term}`).subscribe(\n            response => {\n             // console.log(response);\n                for (const [k, v] of Object.entries(response)) {\n                  if(v.name === term){\n                     // window.location.href = `${this.pokemonByNameUrl}/${term}`;\n                     console.log('daaa');\n                  }\n                }\n            },\n            catchError(this.handleError<Pokemon[]>('getSearchedPokemon', []))\n        );\n    }\n\n    getPokemonTypes()\n    {\n      var PokemonTypesUrl = 'https://pokeapi.co/api/v2/type';\n      return this.http.get<Pokemon>(PokemonTypesUrl);\n    }\n\n    async processPokem(){\n      let result: [] = [];\n      let user_list: [] = [];\n      for (const [key, value] of Object.entries(this.getPokemonTypes())) { \n          result = await this.getPokemonTypes();\n          user_list.push(result);\n      }\n      return user_list;\n  }\n      \n\n    getPokemonImage(): any\n    {\n        // let list: string[] = [];\n        //let list: {id: number, name: string; url: string}[] = [];\n        var data =  this.getPokemons2();\n        let i = 0;\n        var res: any[] = [];\n\n        // console.log(this.getPokemons2());\n\n      //   this.getPokemons2.subscribe(\n      //     data => {\n      //         this.results = data.Results\n      //     }\n      // );\n\n        this.getPokemons2().forEach(item => {\n          //console.log(item.results[0].name);\n          //res.push(item.results);\n          item.results.forEach(childrenEntry => { // was missing a )\n                    \n                    this.list.push(\n                        {\n                          id: Number(childrenEntry.url.split('/')[childrenEntry.url.split('/').length-2]),\n                          name: childrenEntry.name, \n                          url: childrenEntry.url,\n                        }\n                    );\n          });\n        });\n\n        // res.forEach(item2 => {\n        //   //console.log(item.results[0].name);\n        //   list.push(item2.name);\n        // });\n\n        //  console.log(res);\n          console.log(this.list);\n        \n\n\n\n\n        //  var dataModels = [];\n\n        //  dataModels[0] = {\n        //      childNodes: []\n        //  };\n          \n        //  dataModels[0].childNodes[0] = {\n        //      appId: \"foo\"\n        //  };\n          \n        //  dataModels.forEach(function(entry){ \n        //      entry.childNodes.forEach(function(childrenEntry) { // was missing a )\n        //        console.log(childrenEntry.appId);\n        //      });\n        //  });\n      return this.list;\n    }\n\n    // /** GET hero by id. Will 404 if id not found */\n    getPokemon(id: number): Observable<Pokemon> {\n      const url = `${this.pokemonByNameUrl}/${id}`;\n      console.log(url);\n      return this.http.get<Pokemon>(url).pipe(\n        tap(_ => this.log(`fetched Pokemon id=${id}`)),\n        catchError(this.handleError<Pokemon>(`getPokemon id=${id}`))\n      );\n    }\n\n    getPokemonIdByName(name: string): number | undefined | null\n    {\n        if (!name.trim()) {\n          // if not search term, return empty pokemon array.\n          return null;\n        }\n\n        this.http.get<Pokemon>(`${this.pokemonByNameUrl}/${name}`).subscribe(\n          response => {\n          // console.log(response);\n              for (const [k, v] of Object.entries(response)) {\n                if(v.name === name){\n                  // window.location.href = `${this.pokemonByNameUrl}/${term}`;\n                  console.log('daaa');\n\n                  return v.id;\n                }\n              }\n          },\n          catchError(this.handleError<Pokemon[]>('getPokemonIdByName', []))\n        );\n\n        return;\n    }\n\n\n    // /* GET heroes whose name contains search term */\n    // searchPokemons2(term: string): any {\n    //   console.log('asaaa');\n\n    //   if (!term.trim()) {\n    //     // if not search term, return empty pokemon array.\n    //     return of([]);\n    //   }\n\n      \n    //    console.log(`${this.pokemonByNameUrl}/${term}`);\n    //    this.http.get<Pokemon[]>(`${this.pokemonByNameUrl}/${term}`).pipe(\n    //     tap(\n    //       (x) => {\n    //         console.log('aaaaaa');\n    //         for (const [k, v] of Object.entries(x)) {\n    //           if(v.name === term){\n    //             console.log('daaaa');\n    //           // window.location.href = 'https://pokeapi.co/api/v2/pokemon/' + term;\n    //           }else{\n    //             console.log('nuu');\n    //           }\n    //           // console.log(x['name'] === term);\n    //         }\n            \n    //         // if(x){\n    //         //   window.location.href = 'https://pokeapi.co/api/v2/pokemon/bulbasaur';\n    //         // }else{\n    //         //   console.log('nuuuuu');\n    //         // }\n    //       }\n          \n    //       // x.length ?\n    //       // this.log(`found pokemons matching \"${term}\"`) :\n    //       // this.log(`no pokemons matching \"${term}\"`)),\n    //     // catchError(this.handleError<Pokemon[]>('searchPokemons', []))\n    //   ));\n\n    //  // return 'daa';\n    // }\n\n\n\n    /* GET heroes whose name contains search term */\n    searchPokemons(term: string): Observable<Pokemon[]> {\n      // let results = this.http.get<Pokemon>(`https://pokeapi.co/api/v2/pokemon/bulbasaur`);\n      // results.forEach(item2 => {\n      //   console.log(item2);\n      //   // res.push(item.results);\n      //   // item.results.forEach(childrenEntry => { // was missing a )\n      //   //          list.push({name: childrenEntry.name, url: childrenEntry.url});\n      //   // });\n      // });\n\n     //  console.log(term);\n      console.log('asaaa');\n\n      if (!term.trim()) {\n        // if not search term, return empty pokemon array.\n        return of([]);\n      }\n//0727 227 634\n      \n      console.log(`${this.pokemonByNameUrl}/${term}`);\n      return this.http.get<Pokemon[]>(`${this.pokemonByNameUrl}/${term}`).pipe(\n        tap(\n          (x) => {\n            console.log('aaaaaa');\n            for (const [k, v] of Object.entries(x)) {\n              if(v.name === term){\n                console.log('daaaa');\n              // window.location.href = 'https://pokeapi.co/api/v2/pokemon/' + term;\n              }else{\n                console.log('nuu');\n              }\n              // console.log(x['name'] === term);\n            }\n            \n            // if(x){\n            //   window.location.href = 'https://pokeapi.co/api/v2/pokemon/bulbasaur';\n            // }else{\n            //   console.log('nuuuuu');\n            // }\n          }\n          \n          // x.length ?\n          // this.log(`found pokemons matching \"${term}\"`) :\n          // this.log(`no pokemons matching \"${term}\"`)),\n        // catchError(this.handleError<Pokemon[]>('searchPokemons', []))\n      ));\n    }\n\n    basicSearch(term: string): any\n    {\n      let results = this.http.get<Pokemon>(`${this.pokemonByNameUrl}/?name=${term}`);\n     // console.log(results);\n\n      return results;\n    }\n\n    // getPokemonColour(): { type: string; color: string}[] \n\n    getPokemonColour2(type: string): any\n    {\n\n      let colors = ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', \n      'lime', 'maroon', 'navy', 'olive', 'orange', 'purple', 'red', \n      'silver', 'teal', 'white', 'yellow', 'brown', 'magenta', 'kaki'];\n\n      if(type === ''){\n        return 'white';\n      }\n\n      let aa = 'default';\n\n    //   let userTestStatus = [\n    //     { \"id\": 0, \"name\": \"Available\" },\n    //     { \"id\": 1, \"name\": \"Ready\" },\n    //     { \"id\": 2, \"name\": \"Started\" }\n    //   ];\n\n    //   let aa = '';\n    //   userTestStatus.forEach(item => {\n    //     for (const [key, value] of Object.entries(item)) { \n    //     //  console.log(value);\n    //       if(value === 'Ready'){\n    //         aa = 'red';\n    //         break;\n    //       }\n  \n    //     }\n    // });\n\n    // return aa;\n\n\n      let pokemoTypes: { type: string; color: string}[] = [];\n      const commonPals: string[] = [];\n\n      const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n      let pokemonTypes = this.getPokemonTypes();\n\n\n      for (const [key, value] of Object.entries(pokemonTypes)) { \n              console.log(value);\n            \n      }\n\n\n        // pokemonTypes.forEach(item => {\n        //     for (const [key, value] of Object.entries(item.results)) { \n        //       console.log(value);\n        //       commonPals.push(value.name);\n        //         if(value.name === type){\n        //           aa = 'red';\n        //           break;\n        //      //    console.log('vvvv');\n        //        //  commonPals.push( 'green');\n        //        //  console.log(Number(key));\n        //       //   console.log(colors[Number(key)]);\n        //             // return colors[id];\n        //             // return 5;\n        //         }\n        //     }\n        // });\n\n        console.log(commonPals);\n\n        return aa;\n\n        // console.log(aa);\n\n\n      //   return colors[id];\n\n       //  console.log(commonPals.length);\n        // console.log(commonPals.length);\n        // //console.log();\n\n        // console.log(Array.isArray(commonPals));\n\n\n\n\n        // if(commonPals){\n        //   return commonPals;\n        // }\n\n      //  console.log(commonPals);\n\n      //  return this.bb ;\n    }\n\n\n\n    getPokemonColour(type: string): any\n    {\n      var colors= ['aqua', 'black', 'blue', 'fuchsia', 'gray', 'green', \n      'lime', 'maroon', 'navy', 'olive', 'orange', 'purple', 'red', \n      'silver', 'teal', 'white', 'yellow', 'brown', 'magenta', 'kaki'];\n      // let pokemoTypes = new Map([]);\n\n      // if(type === ''){\n      //   return '';\n      // }\n\n      let aa = '';\n      let pokemoTypes: { type: string; color: string}[] = [];\n\n      this.getPokemonTypes().forEach(item => {\n          for (const [key, value] of Object.entries(item.results)) { \n          console.log(type);\n          //this.pokemoTypes.set(value.name, colors[Number(key)]);\n          if(value.name === type){\n            console.log('vvvv');\n         //   console.log(colors[Number(key)]);\n              //return colors[Number(key)];\n          }\n            // pokemoTypes.push(\n            //     {\n            //       type: value.name,\n            //       color: colors[Number(key)]\n            //     }\n            // );\n          }\n      });\n\n  //    console.log(this.bb);\n\n    // console.log(this.pokemoTypes.keys);\n\n    //  console.log('xxx');\n    // pokemoTypes.forEach(item => {\n    //   console.log(item.color[0]);\n    // });\n      \n\n      // this.getPokemonTypes().forEach(item => {\n      //   //console.log(item.results[0].name);\n      //   //res.push(item.results);\n      //   item.results.forEach(item => { // was missing a )\n      //             //console.log(item);\n      //             this.pokemoTypes.push(\n      //                 {\n      //                   type: item.name,\n      //                   color: colors[Number(1)]\n      //                 }\n      //             );\n      //   });\n      // });\n\n      // return this.pokemoTypes;\n    }\n\n\n    // this.http.get<Pokemon>('http://pokeapi.co/api/v2/pokemon/?limit=30&offset=0.').subscribe(data => {\n          //     this.pokemons = data.results;\n          // })\n\n    /**\n     * Handle Http operation that failed.\n     * Let the app continue.\n     *\n     * @param operation - name of the operation that failed\n     * @param result - optional value to return as the observable result\n     */\n    private handleError<T>(operation = 'operation', result?: T) {\n      return (error: any): Observable<T> => {\n\n        // TODO: send the error to remote logging infrastructure\n        console.error(error); // log to console instead\n\n        // TODO: better job of transforming error for user consumption\n        this.log(`${operation} failed: ${error.message}`);\n\n        // Let the app keep running by returning an empty result.\n        return of(result as T);\n      };\n    }\n\n    /** Log a HeroService message with the MessageService */\n    private log(message: string) {\n      this.messageService.add(`HeroService: ${message}`);\n    }\n\n\n}\n"]},"metadata":{},"sourceType":"module"}