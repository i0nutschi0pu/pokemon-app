{"ast":null,"code":"import { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/pokemon-crud.service\";\nimport * as i3 from \"@angular/common\";\nfunction PokemonDamageComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"special\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PokemonDamageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"status\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PokemonDamageComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"physical\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class PokemonDamageComponent {\n  constructor(route, pokemonService) {\n    this.route = route;\n    this.pokemonService = pokemonService;\n    this.isSpecial = false;\n    this.isPhysical = false;\n    this.isStatus = false;\n  }\n  ngOnInit() {\n    //  this.getPokemonMoves();\n    //  this.getMovesForStatusDamageClass();\n    //  this.getMovesForSpecialDamageClass();\n    //  this.getMovesForPhysicalDamageClass();\n    this.getPokMoves();\n  }\n  getPokemonId() {\n    return parseInt(this.route.snapshot.paramMap.get('id'), 10);\n  }\n  stringExtract(url) {\n    return Number(url.split('/')[url.split('/').length - 2]);\n  }\n  // getPokemonMovesF() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getPokemon(id)\n  //   .subscribe( (pokemon) => { \n  //       pokemon.moves.forEach( (urls: any) => {\n  //         thingsArray.push(this.stringExtract(urls.move.url));\n  //       });\n  //     subject.next(thingsArray);\n  //  });\n  //   return subject.asObservable();\n  // }\n  // getPokemonMoves() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   this.pokemonService.getPokemon(id)\n  //     .subscribe( (pokemon) => { \n  //      this.pokemon = pokemon;\n  //      pokemon.moves.forEach( (urls: any) => {\n  //     });\n  //    });\n  // }\n  // getMovesForStatusDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForStatusDamageClass()\n  //     .subscribe( (damage) => { \n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n  //     });\n  //     subject.next(thingsArray);\n  //   });\n  //   this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isStatus =  true;\n  //           return this.isStatus;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  // getMovesForPhysicalDamageClass()\n  // {\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getMovesForPhysicalDamageClass()\n  //     .subscribe( (damage) => { \n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n  //     });\n  //     subject.next(thingsArray);\n  //    });\n  //    this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isPhysical =  true;\n  //           console.log(this.isPhysical);\n  //           return this.isPhysical;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  // getMovesForSpecialDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForSpecialDamageClass()\n  //     .subscribe( (damage) => { \n  //         damage.moves.forEach( (moves: any) => {\n  //           thingsArray.push(this.stringExtract(moves.url));\n  //       });\n  //       subject.next(thingsArray);\n  //    });\n  //     this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isSpecial = true;\n  //           return this.isSpecial;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  getPokMoves() {\n    let currentPokemovesIds = [];\n    let specialDamageMovesIds = [];\n    let physicalDamageMovesIds = [];\n    let statusDamageMovesIds = [];\n    forkJoin([this.pokemonService.getPokemon(this.getPokemonId()), this.pokemonService.getMovesForSpecialDamageClass(), this.pokemonService.getMovesForPhysicalDamageClass(), this.pokemonService.getMovesForStatusDamageClass()]).subscribe(res => {\n      console.log(res);\n      this.pokemon = res[0];\n      res[0].moves.forEach(moves => {\n        currentPokemovesIds.push(this.stringExtract(moves.move.url));\n      });\n      res[1].moves.forEach(moves => {\n        specialDamageMovesIds.push(this.stringExtract(moves.url));\n      });\n      res[2].moves.forEach(moves => {\n        physicalDamageMovesIds.push(this.stringExtract(moves.url));\n      });\n      res[3].moves.forEach(moves => {\n        statusDamageMovesIds.push(this.stringExtract(moves.url));\n      });\n      console.log(statusDamageMovesIds);\n      currentPokemovesIds.forEach(moves => {\n        if (specialDamageMovesIds.includes(moves)) {\n          this.isSpecial = true;\n          return;\n        }\n        if (physicalDamageMovesIds.includes(moves)) {\n          this.isPhysical = true;\n          return;\n        }\n        if (statusDamageMovesIds.includes(moves)) {\n          this.isStatus = true;\n          return;\n        }\n      });\n    });\n  }\n  static #_ = this.ɵfac = function PokemonDamageComponent_Factory(t) {\n    return new (t || PokemonDamageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PokemonCRUDService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PokemonDamageComponent,\n    selectors: [[\"app-pokemon-damage\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[1, \"col-lg-12\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"mt-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\"]],\n    template: function PokemonDamageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"p\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, PokemonDamageComponent_div_2_Template, 3, 0, \"div\", 1);\n        i0.ɵɵtemplate(3, PokemonDamageComponent_div_3_Template, 3, 0, \"div\", 1);\n        i0.ɵɵtemplate(4, PokemonDamageComponent_div_4_Template, 3, 0, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSpecial);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isStatus);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isPhysical);\n      }\n    },\n    dependencies: [i3.NgIf],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"AAMA,SAASA,QAAQ,QAAsB,MAAM;;;;;;;ICHzCC,8BAAoC;IACwBA,uBAAO;IAAAA,iBAAS;;;;;IAE5EA,8BAAmC;IACwBA,sBAAM;IAAAA,iBAAS;;;;;IAE1EA,8BAAqC;IACsBA,wBAAQ;IAAAA,iBAAS;;;ADGhF,OAAM,MAAOC,sBAAsB;EAajCC,YACUC,KAAqB,EACrBC,cAAkC;IADlC,UAAK,GAALD,KAAK;IACL,mBAAc,GAAdC,cAAc;IAPxB,cAAS,GAAY,KAAK;IAC1B,eAAU,GAAY,KAAK;IAC3B,aAAQ,GAAY,KAAK;EAMtB;EAEHC,QAAQ;IACN;IACA;IACA;IACA;IACC,IAAI,CAACC,WAAW,EAAE;EACrB;EAGAC,YAAY;IAEV,OAAOC,QAAQ,CAAC,IAAI,CAACL,KAAK,CAACM,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAE,EAAE,EAAE,CAAC;EAC9D;EAEAC,aAAa,CAACC,GAAW;IAEvB,OAAOC,MAAM,CAACD,GAAG,CAACE,KAAK,CAAC,GAAG,CAAC,CAACF,GAAG,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,MAAM,GAAG,CAAC,CAAC,CAAC;EAC1D;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAGA;EACA;EAEA;EACA;EACA;EAEA;EACA;EACA;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEA;EACA;EAEA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EAEAV,WAAW;IAET,IAAIW,mBAAmB,GAAW,EAAE;IACpC,IAAIC,qBAAqB,GAAW,EAAE;IACtC,IAAIC,sBAAsB,GAAW,EAAE;IACvC,IAAIC,oBAAoB,GAAW,EAAE;IAErCrB,QAAQ,CAAC,CACP,IAAI,CAACK,cAAc,CAACiB,UAAU,CAAC,IAAI,CAACd,YAAY,EAAE,CAAC,EACnD,IAAI,CAACH,cAAc,CAACkB,6BAA6B,EAAE,EACnD,IAAI,CAAClB,cAAc,CAACmB,8BAA8B,EAAE,EACpD,IAAI,CAACnB,cAAc,CAACoB,4BAA4B,EAAE,CACnD,CAAC,CAACC,SAAS,CAAEC,GAAQ,IAAI;MACtBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAEhB,IAAI,CAACG,OAAO,GAAGH,GAAG,CAAC,CAAC,CAAC;MAErBA,GAAG,CAAC,CAAC,CAAC,CAACI,KAAK,CAACC,OAAO,CAAGD,KAAU,IAAI;QACnCb,mBAAmB,CAACe,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACkB,KAAK,CAACG,IAAI,CAACpB,GAAG,CAAC,CAAC;MAC9D,CAAC,CAAC;MAEFa,GAAG,CAAC,CAAC,CAAC,CAACI,KAAK,CAACC,OAAO,CAAGD,KAAU,IAAI;QACnCZ,qBAAqB,CAACc,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACkB,KAAK,CAACjB,GAAG,CAAC,CAAC;MAC3D,CAAC,CAAC;MAEFa,GAAG,CAAC,CAAC,CAAC,CAACI,KAAK,CAACC,OAAO,CAAGD,KAAU,IAAI;QACnCX,sBAAsB,CAACa,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACkB,KAAK,CAACjB,GAAG,CAAC,CAAC;MAC5D,CAAC,CAAC;MAEFa,GAAG,CAAC,CAAC,CAAC,CAACI,KAAK,CAACC,OAAO,CAAGD,KAAU,IAAI;QACnCV,oBAAoB,CAACY,IAAI,CAAC,IAAI,CAACpB,aAAa,CAACkB,KAAK,CAACjB,GAAG,CAAC,CAAC;MAC1D,CAAC,CAAC;MAEFc,OAAO,CAACC,GAAG,CAACR,oBAAoB,CAAC;MAEjCH,mBAAmB,CAACc,OAAO,CAAGD,KAAU,IAAI;QAE1C,IAAGZ,qBAAqB,CAACgB,QAAQ,CAACJ,KAAK,CAAC,EAAC;UACvC,IAAI,CAACK,SAAS,GAAI,IAAI;UACtB;;QAGF,IAAGhB,sBAAsB,CAACe,QAAQ,CAACJ,KAAK,CAAC,EAAC;UACxC,IAAI,CAACM,UAAU,GAAI,IAAI;UACvB;;QAGF,IAAGhB,oBAAoB,CAACc,QAAQ,CAACJ,KAAK,CAAC,EAAC;UACtC,IAAI,CAACO,QAAQ,GAAI,IAAI;UACrB;;MAEJ,CAAC,CAAC;IAEJ,CAAC,CAAC;EAGN;EAAC;qBAjNUpC,sBAAsB;EAAA;EAAA;UAAtBA,sBAAsB;IAAAqC;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCbnC1C,oBAAO;QAEPA,8BAAuB;QACnBA,uEAEM;QACNA,uEAEM;QACNA,uEAEM;QACVA,iBAAM;;;QATiBA,eAAe;QAAfA,oCAAe;QAGfA,eAAc;QAAdA,mCAAc;QAGdA,eAAgB;QAAhBA,qCAAgB","names":["forkJoin","i0","PokemonDamageComponent","constructor","route","pokemonService","ngOnInit","getPokMoves","getPokemonId","parseInt","snapshot","paramMap","get","stringExtract","url","Number","split","length","currentPokemovesIds","specialDamageMovesIds","physicalDamageMovesIds","statusDamageMovesIds","getPokemon","getMovesForSpecialDamageClass","getMovesForPhysicalDamageClass","getMovesForStatusDamageClass","subscribe","res","console","log","pokemon","moves","forEach","push","move","includes","isSpecial","isPhysical","isStatus","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/ionut/pokemon_app/src/app/components/pokemons/pokemon-damage/pokemon-damage.component.ts","/Users/ionut/pokemon_app/src/app/components/pokemons/pokemon-damage/pokemon-damage.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, ɵafterNextNavigation } from '@angular/router';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { PokemonCRUDService } from 'src/app/pokemon-crud.service';\nimport { Pokemon } from 'src/app/pokemon.model';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { forkJoin, map, Subject } from 'rxjs';\n\n@Component({\n  selector: 'app-pokemon-damage',\n  templateUrl: './pokemon-damage.component.html',\n  styleUrls: ['./pokemon-damage.component.css']\n})\nexport class PokemonDamageComponent implements OnInit {\n\n  pokemon!: Pokemon\n  evolves_to!: string;\n  moves!: [move: {url: string}];\n  statusDamageMoves!: [{url: string}];\n  physicalDamageMoves!: [{url: string}];\n  specialDamageMoves!: [{url: string}];\n  isSpecial: boolean = false;\n  isPhysical: boolean = false;\n  isStatus: boolean = false;\n\n\n  constructor(\n    private route: ActivatedRoute,\n    private pokemonService: PokemonCRUDService,\n  ) {}\n\n  ngOnInit(): void {\n    //  this.getPokemonMoves();\n    //  this.getMovesForStatusDamageClass();\n    //  this.getMovesForSpecialDamageClass();\n    //  this.getMovesForPhysicalDamageClass();\n     this.getPokMoves();\n  }\n\n\n  getPokemonId(): number\n  {\n    return parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  }\n\n  stringExtract(url: string): number // move this into a helper class\n  {\n    return Number(url.split('/')[url.split('/').length - 2]);\n  }\n\n  // getPokemonMovesF() \n  // {\n\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getPokemon(id)\n  //   .subscribe( (pokemon) => { \n\n  //       pokemon.moves.forEach( (urls: any) => {\n  //         thingsArray.push(this.stringExtract(urls.move.url));\n          \n  //       });\n  //     subject.next(thingsArray);\n  //  });\n   \n    \n  //   return subject.asObservable();\n  // }\n\n  // getPokemonMoves() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n\n  //   this.pokemonService.getPokemon(id)\n  //     .subscribe( (pokemon) => { \n  //      this.pokemon = pokemon;\n\n  //      pokemon.moves.forEach( (urls: any) => {\n  //     });\n  //    });\n  // }\n\n  // getMovesForStatusDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForStatusDamageClass()\n  //     .subscribe( (damage) => { \n\n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n          \n  //     });\n  //     subject.next(thingsArray);\n  //   });\n\n  //   this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isStatus =  true;\n  //           return this.isStatus;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  // getMovesForPhysicalDamageClass()\n  // {\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getMovesForPhysicalDamageClass()\n  //     .subscribe( (damage) => { \n\n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n          \n  //     });\n  //     subject.next(thingsArray);\n  //    });\n\n  //    this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isPhysical =  true;\n  //           console.log(this.isPhysical);\n  //           return this.isPhysical;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  // getMovesForSpecialDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForSpecialDamageClass()\n  //     .subscribe( (damage) => { \n\n  //         damage.moves.forEach( (moves: any) => {\n  //           thingsArray.push(this.stringExtract(moves.url));\n            \n  //       });\n  //       subject.next(thingsArray);\n      \n  //    });\n\n  //     this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isSpecial = true;\n  //           return this.isSpecial;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  getPokMoves()\n  {\n    let currentPokemovesIds: number[]=[];\n    let specialDamageMovesIds: number[]=[];\n    let physicalDamageMovesIds: number[]=[];\n    let statusDamageMovesIds: number[]=[];\n\n    forkJoin([\n      this.pokemonService.getPokemon(this.getPokemonId()),\n      this.pokemonService.getMovesForSpecialDamageClass(),\n      this.pokemonService.getMovesForPhysicalDamageClass(),\n      this.pokemonService.getMovesForStatusDamageClass()\n    ]).subscribe((res: any) => {\n        console.log(res);\n\n        this.pokemon = res[0];\n\n        res[0].moves.forEach( (moves: any) => {\n          currentPokemovesIds.push(this.stringExtract(moves.move.url));\n        });\n\n        res[1].moves.forEach( (moves: any) => {\n          specialDamageMovesIds.push(this.stringExtract(moves.url));\n        });\n\n        res[2].moves.forEach( (moves: any) => {\n          physicalDamageMovesIds.push(this.stringExtract(moves.url));\n        });\n\n        res[3].moves.forEach( (moves: any) => {\n          statusDamageMovesIds.push(this.stringExtract(moves.url));\n        });\n\n        console.log(statusDamageMovesIds);\n        \n        currentPokemovesIds.forEach( (moves: any) => {\n\n          if(specialDamageMovesIds.includes(moves)){\n            this.isSpecial =  true;\n            return ;\n          }\n  \n          if(physicalDamageMovesIds.includes(moves)){\n            this.isPhysical =  true;\n            return;\n          }\n  \n          if(statusDamageMovesIds.includes(moves)){\n            this.isStatus =  true;\n            return;\n          }\n        })\n      \n      });\n\n      \n  }\n\n}\n\n","<p></p>\n<!-- <h1>{{moves}}</h1> -->\n<div class=\"col-lg-12\">\n    <div class=\"mt-2\" *ngIf=\"isSpecial\">\n        <button type=\"button\"  class=\"btn btn-secondary btn-lg\">special</button>\n    </div>\n    <div class=\"mt-2\" *ngIf=\"isStatus\">\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\">status</button>\n    </div>\n    <div class=\"mt-2\" *ngIf=\"isPhysical\">\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\">physical</button>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}