{"ast":null,"code":"import { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/service/pokemon-crud.service\";\nimport * as i3 from \"src/app/service/helper.service\";\nimport * as i4 from \"@angular/common\";\nfunction PokemonDamageComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"special\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PokemonDamageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"status\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PokemonDamageComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3);\n    i0.ɵɵtext(2, \"physical\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class PokemonDamageComponent {\n  constructor(route, pokemonService, helperService) {\n    this.route = route;\n    this.pokemonService = pokemonService;\n    this.helperService = helperService;\n    this.isSpecial = false;\n    this.isPhysical = false;\n    this.isStatus = false;\n  }\n  ngOnInit() {\n    //  this.getPokemonMoves();\n    //  this.getMovesForStatusDamageClass();\n    //  this.getMovesForSpecialDamageClass();\n    //  this.getMovesForPhysicalDamageClass();\n    this.getPokMoves();\n  }\n  // getPokemonId(): number\n  // {\n  //   return parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  // }\n  // stringExtract(url: string): number // move this into a helper class\n  // {\n  //   return Number(url.split('/')[url.split('/').length - 2]);\n  // }\n  // getPokemonMovesF() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getPokemon(id)\n  //   .subscribe( (pokemon) => { \n  //       pokemon.moves.forEach( (urls: any) => {\n  //         thingsArray.push(this.stringExtract(urls.move.url));\n  //       });\n  //     subject.next(thingsArray);\n  //  });\n  //   return subject.asObservable();\n  // }\n  // getPokemonMoves() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   this.pokemonService.getPokemon(id)\n  //     .subscribe( (pokemon) => { \n  //      this.pokemon = pokemon;\n  //      pokemon.moves.forEach( (urls: any) => {\n  //     });\n  //    });\n  // }\n  // getMovesForStatusDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForStatusDamageClass()\n  //     .subscribe( (damage) => { \n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n  //     });\n  //     subject.next(thingsArray);\n  //   });\n  //   this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isStatus =  true;\n  //           return this.isStatus;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  // getMovesForPhysicalDamageClass()\n  // {\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getMovesForPhysicalDamageClass()\n  //     .subscribe( (damage) => { \n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n  //     });\n  //     subject.next(thingsArray);\n  //    });\n  //    this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isPhysical =  true;\n  //           console.log(this.isPhysical);\n  //           return this.isPhysical;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  // getMovesForSpecialDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForSpecialDamageClass()\n  //     .subscribe( (damage) => { \n  //         damage.moves.forEach( (moves: any) => {\n  //           thingsArray.push(this.stringExtract(moves.url));\n  //       });\n  //       subject.next(thingsArray);\n  //    });\n  //     this.getPokemonMovesF().subscribe((r)=> \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isSpecial = true;\n  //           return this.isSpecial;\n  //         }\n  //       })\n  //     );\n  //   return subject.asObservable();\n  // }\n  getPokMoves() {\n    let currentPokemovesIds = [];\n    let specialDamageMovesIds = [];\n    let physicalDamageMovesIds = [];\n    let statusDamageMovesIds = [];\n    forkJoin([this.pokemonService.getPokemon(this.helperService.getPokemonId(this.route.snapshot.paramMap.get('id'))), this.pokemonService.getMovesForSpecialDamageClass(), this.pokemonService.getMovesForPhysicalDamageClass(), this.pokemonService.getMovesForStatusDamageClass()]).subscribe(res => {\n      this.pokemon = res[0];\n      res[0].moves.forEach(moves => {\n        currentPokemovesIds.push(this.helperService.stringExtract(moves.move.url));\n      });\n      res[1].moves.forEach(moves => {\n        specialDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n      });\n      res[2].moves.forEach(moves => {\n        physicalDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n      });\n      res[3].moves.forEach(moves => {\n        statusDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n      });\n      currentPokemovesIds.forEach(moves => {\n        if (specialDamageMovesIds.includes(moves)) {\n          this.isSpecial = true;\n          return;\n        }\n        if (physicalDamageMovesIds.includes(moves)) {\n          this.isPhysical = true;\n          return;\n        }\n        if (statusDamageMovesIds.includes(moves)) {\n          this.isStatus = true;\n          return;\n        }\n      });\n    });\n  }\n  static #_ = this.ɵfac = function PokemonDamageComponent_Factory(t) {\n    return new (t || PokemonDamageComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PokemonCRUDService), i0.ɵɵdirectiveInject(i3.HelperService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PokemonDamageComponent,\n    selectors: [[\"app-pokemon-damage\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[1, \"col-lg-12\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"mt-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\"]],\n    template: function PokemonDamageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"p\");\n        i0.ɵɵelementStart(1, \"div\", 0);\n        i0.ɵɵtemplate(2, PokemonDamageComponent_div_2_Template, 3, 0, \"div\", 1);\n        i0.ɵɵtemplate(3, PokemonDamageComponent_div_3_Template, 3, 0, \"div\", 1);\n        i0.ɵɵtemplate(4, PokemonDamageComponent_div_4_Template, 3, 0, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSpecial);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isStatus);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isPhysical);\n      }\n    },\n    dependencies: [i4.NgIf],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["forkJoin","i0","PokemonDamageComponent","constructor","route","pokemonService","helperService","ngOnInit","getPokMoves","currentPokemovesIds","specialDamageMovesIds","physicalDamageMovesIds","statusDamageMovesIds","getPokemon","getPokemonId","snapshot","paramMap","get","getMovesForSpecialDamageClass","getMovesForPhysicalDamageClass","getMovesForStatusDamageClass","subscribe","res","pokemon","moves","forEach","push","stringExtract","move","url","includes","isSpecial","isPhysical","isStatus","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/ionut/pokemon_app/src/app/components/pokemons/pokemon-damage/pokemon-damage.component.ts","/Users/ionut/pokemon_app/src/app/components/pokemons/pokemon-damage/pokemon-damage.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { PokemonCRUDService } from 'src/app/service/pokemon-crud.service';\nimport { Pokemon } from 'src/app/model/pokemon.model';\nimport { forkJoin} from 'rxjs';\nimport { HelperService } from 'src/app/service/helper.service'; \n\n@Component({\n  selector: 'app-pokemon-damage',\n  templateUrl: './pokemon-damage.component.html',\n  styleUrls: ['./pokemon-damage.component.css']\n})\nexport class PokemonDamageComponent implements OnInit {\n\n  pokemon!: Pokemon\n  evolves_to!: string;\n  moves!: [move: {url: string}];\n  statusDamageMoves!: [{url: string}];\n  physicalDamageMoves!: [{url: string}];\n  specialDamageMoves!: [{url: string}];\n  isSpecial: boolean = false;\n  isPhysical: boolean = false;\n  isStatus: boolean = false;\n\n\n  constructor(\n    private route: ActivatedRoute,\n    private pokemonService: PokemonCRUDService,\n    private helperService: HelperService,\n  ) {}\n\n  ngOnInit(): void {\n    //  this.getPokemonMoves();\n    //  this.getMovesForStatusDamageClass();\n    //  this.getMovesForSpecialDamageClass();\n    //  this.getMovesForPhysicalDamageClass();\n     this.getPokMoves();\n  }\n\n\n  // getPokemonId(): number\n  // {\n  //   return parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  // }\n\n  // stringExtract(url: string): number // move this into a helper class\n  // {\n  //   return Number(url.split('/')[url.split('/').length - 2]);\n  // }\n\n  // getPokemonMovesF() \n  // {\n\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getPokemon(id)\n  //   .subscribe( (pokemon) => { \n\n  //       pokemon.moves.forEach( (urls: any) => {\n  //         thingsArray.push(this.stringExtract(urls.move.url));\n          \n  //       });\n  //     subject.next(thingsArray);\n  //  });\n   \n    \n  //   return subject.asObservable();\n  // }\n\n  // getPokemonMoves() \n  // {\n  //   const id = parseInt(this.route.snapshot.paramMap.get('id')!, 10);\n\n  //   this.pokemonService.getPokemon(id)\n  //     .subscribe( (pokemon) => { \n  //      this.pokemon = pokemon;\n\n  //      pokemon.moves.forEach( (urls: any) => {\n  //     });\n  //    });\n  // }\n\n  // getMovesForStatusDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForStatusDamageClass()\n  //     .subscribe( (damage) => { \n\n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n          \n  //     });\n  //     subject.next(thingsArray);\n  //   });\n\n  //   this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isStatus =  true;\n  //           return this.isStatus;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  // getMovesForPhysicalDamageClass()\n  // {\n  //   var subject = new Subject<any>();\n  //   let thingsArray: number[]=[];\n  //   this.pokemonService.getMovesForPhysicalDamageClass()\n  //     .subscribe( (damage) => { \n\n  //       damage.moves.forEach( (moves: any) => {\n  //         thingsArray.push(this.stringExtract(moves.url));\n          \n  //     });\n  //     subject.next(thingsArray);\n  //    });\n\n  //    this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isPhysical =  true;\n  //           console.log(this.isPhysical);\n  //           return this.isPhysical;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  // getMovesForSpecialDamageClass()\n  // {\n  //     var subject = new Subject<any>();\n  //     let thingsArray: number[]=[];\n  //     this.pokemonService.getMovesForSpecialDamageClass()\n  //     .subscribe( (damage) => { \n\n  //         damage.moves.forEach( (moves: any) => {\n  //           thingsArray.push(this.stringExtract(moves.url));\n            \n  //       });\n  //       subject.next(thingsArray);\n      \n  //    });\n\n  //     this.getPokemonMovesF().subscribe((r)=> \n      \n  //       r.forEach( (moves: any) => {\n  //         if(thingsArray.includes(moves)){\n  //           this.isSpecial = true;\n  //           return this.isSpecial;\n  //         }\n  //       })\n  //     );\n     \n  //   return subject.asObservable();\n  // }\n\n  getPokMoves()\n  {\n    let currentPokemovesIds: number[]=[];\n    let specialDamageMovesIds: number[]=[];\n    let physicalDamageMovesIds: number[]=[];\n    let statusDamageMovesIds: number[]=[];\n\n    forkJoin([\n      this.pokemonService.getPokemon(this.helperService.getPokemonId(this.route.snapshot.paramMap.get('id')!)),\n      this.pokemonService.getMovesForSpecialDamageClass(),\n      this.pokemonService.getMovesForPhysicalDamageClass(),\n      this.pokemonService.getMovesForStatusDamageClass()\n    ]).subscribe((res: any) => {\n\n        this.pokemon = res[0];\n\n        res[0].moves.forEach( (moves: any) => {\n          currentPokemovesIds.push(this.helperService.stringExtract(moves.move.url));\n        });\n\n        res[1].moves.forEach( (moves: any) => {\n          specialDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n        });\n\n        res[2].moves.forEach( (moves: any) => {\n          physicalDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n        });\n\n        res[3].moves.forEach( (moves: any) => {\n          statusDamageMovesIds.push(this.helperService.stringExtract(moves.url));\n        });\n        \n        currentPokemovesIds.forEach( (moves: any) => {\n\n          if(specialDamageMovesIds.includes(moves)){\n            this.isSpecial =  true;\n            return ;\n          }\n  \n          if(physicalDamageMovesIds.includes(moves)){\n            this.isPhysical =  true;\n            return;\n          }\n  \n          if(statusDamageMovesIds.includes(moves)){\n            this.isStatus =  true;\n            return;\n          }\n        })\n      \n      });\n  }\n\n}\n\n","<p></p>\n<!-- <h1>{{moves}}</h1> -->\n<div class=\"col-lg-12\">\n    <div class=\"mt-2\" *ngIf=\"isSpecial\">\n        <button type=\"button\"  class=\"btn btn-secondary btn-lg\">special</button>\n    </div>\n    <div class=\"mt-2\" *ngIf=\"isStatus\">\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\">status</button>\n    </div>\n    <div class=\"mt-2\" *ngIf=\"isPhysical\">\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\">physical</button>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}